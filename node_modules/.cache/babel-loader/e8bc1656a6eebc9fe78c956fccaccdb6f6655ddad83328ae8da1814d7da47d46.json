{"ast":null,"code":"var util = require('../util');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\nfunction populateMethod(req) {\n  req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n}\nfunction generateURI(endpointPath, operationPath, input, params) {\n  var uri = [endpointPath, operationPath].join('/');\n  uri = uri.replace(/\\/+/g, '/');\n  var queryString = {},\n    queryStringSet = false;\n  util.each(input.members, function (name, member) {\n    var paramValue = params[name];\n    if (paramValue === null || paramValue === undefined) return;\n    if (member.location === 'uri') {\n      var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n      uri = uri.replace(regex, function (_, plus) {\n        var fn = plus ? util.uriEscapePath : util.uriEscape;\n        return fn(String(paramValue));\n      });\n    } else if (member.location === 'querystring') {\n      queryStringSet = true;\n      if (member.type === 'list') {\n        queryString[member.name] = paramValue.map(function (val) {\n          return util.uriEscape(member.member.toWireFormat(val).toString());\n        });\n      } else if (member.type === 'map') {\n        util.each(paramValue, function (key, value) {\n          if (Array.isArray(value)) {\n            queryString[key] = value.map(function (val) {\n              return util.uriEscape(String(val));\n            });\n          } else {\n            queryString[key] = util.uriEscape(String(value));\n          }\n        });\n      } else {\n        queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n      }\n    }\n  });\n  if (queryStringSet) {\n    uri += uri.indexOf('?') >= 0 ? '&' : '?';\n    var parts = [];\n    util.arrayEach(Object.keys(queryString).sort(), function (key) {\n      if (!Array.isArray(queryString[key])) {\n        queryString[key] = [queryString[key]];\n      }\n      for (var i = 0; i < queryString[key].length; i++) {\n        parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n      }\n    });\n    uri += parts.join('&');\n  }\n  return uri;\n}\nfunction populateURI(req) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n  var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n  req.httpRequest.path = uri;\n}\nfunction populateHeaders(req) {\n  var operation = req.service.api.operations[req.operation];\n  util.each(operation.input.members, function (name, member) {\n    var value = req.params[name];\n    if (value === null || value === undefined) return;\n    if (member.location === 'headers' && member.type === 'map') {\n      util.each(value, function (key, memberValue) {\n        req.httpRequest.headers[member.name + key] = memberValue;\n      });\n    } else if (member.location === 'header') {\n      value = member.toWireFormat(value).toString();\n      if (member.isJsonValue) {\n        value = util.base64.encode(value);\n      }\n      req.httpRequest.headers[member.name] = value;\n    }\n  });\n}\nfunction buildRequest(req) {\n  populateMethod(req);\n  populateURI(req);\n  populateHeaders(req);\n  populateHostPrefix(req);\n}\nfunction extractError() {}\nfunction extractData(resp) {\n  var req = resp.request;\n  var data = {};\n  var r = resp.httpResponse;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  // normalize headers names to lower-cased keys for matching\n  var headers = {};\n  util.each(r.headers, function (k, v) {\n    headers[k.toLowerCase()] = v;\n  });\n  util.each(output.members, function (name, member) {\n    var header = (member.name || name).toLowerCase();\n    if (member.location === 'headers' && member.type === 'map') {\n      data[name] = {};\n      var location = member.isLocationName ? member.name : '';\n      var pattern = new RegExp('^' + location + '(.+)', 'i');\n      util.each(r.headers, function (k, v) {\n        var result = k.match(pattern);\n        if (result !== null) {\n          data[name][result[1]] = v;\n        }\n      });\n    } else if (member.location === 'header') {\n      if (headers[header] !== undefined) {\n        var value = member.isJsonValue ? util.base64.decode(headers[header]) : headers[header];\n        data[name] = member.toType(value);\n      }\n    } else if (member.location === 'statusCode') {\n      data[name] = parseInt(r.statusCode, 10);\n    }\n  });\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData,\n  generateURI: generateURI\n};","map":{"version":3,"names":["util","require","populateHostPrefix","populateMethod","req","httpRequest","method","service","api","operations","operation","httpMethod","generateURI","endpointPath","operationPath","input","params","uri","join","replace","queryString","queryStringSet","each","members","name","member","paramValue","undefined","location","regex","RegExp","_","plus","fn","uriEscapePath","uriEscape","String","type","map","val","toWireFormat","toString","key","value","Array","isArray","indexOf","parts","arrayEach","Object","keys","sort","i","length","push","populateURI","endpoint","path","httpPath","populateHeaders","memberValue","headers","isJsonValue","base64","encode","buildRequest","extractError","extractData","resp","request","data","r","httpResponse","output","k","v","toLowerCase","header","isLocationName","pattern","result","match","decode","toType","parseInt","statusCode","module","exports"],"sources":["/Users/damianmiskow/Desktop/Projects/Synchrony-Interview-Process/node_modules/aws-sdk/lib/protocol/rest.js"],"sourcesContent":["var util = require('../util');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction populateMethod(req) {\n  req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n}\n\nfunction generateURI(endpointPath, operationPath, input, params) {\n  var uri = [endpointPath, operationPath].join('/');\n  uri = uri.replace(/\\/+/g, '/');\n\n  var queryString = {}, queryStringSet = false;\n  util.each(input.members, function (name, member) {\n    var paramValue = params[name];\n    if (paramValue === null || paramValue === undefined) return;\n    if (member.location === 'uri') {\n      var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n      uri = uri.replace(regex, function(_, plus) {\n        var fn = plus ? util.uriEscapePath : util.uriEscape;\n        return fn(String(paramValue));\n      });\n    } else if (member.location === 'querystring') {\n      queryStringSet = true;\n\n      if (member.type === 'list') {\n        queryString[member.name] = paramValue.map(function(val) {\n          return util.uriEscape(member.member.toWireFormat(val).toString());\n        });\n      } else if (member.type === 'map') {\n        util.each(paramValue, function(key, value) {\n          if (Array.isArray(value)) {\n            queryString[key] = value.map(function(val) {\n              return util.uriEscape(String(val));\n            });\n          } else {\n            queryString[key] = util.uriEscape(String(value));\n          }\n        });\n      } else {\n        queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n      }\n    }\n  });\n\n  if (queryStringSet) {\n    uri += (uri.indexOf('?') >= 0 ? '&' : '?');\n    var parts = [];\n    util.arrayEach(Object.keys(queryString).sort(), function(key) {\n      if (!Array.isArray(queryString[key])) {\n        queryString[key] = [queryString[key]];\n      }\n      for (var i = 0; i < queryString[key].length; i++) {\n        parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n      }\n    });\n    uri += parts.join('&');\n  }\n\n  return uri;\n}\n\nfunction populateURI(req) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n\n  var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n  req.httpRequest.path = uri;\n}\n\nfunction populateHeaders(req) {\n  var operation = req.service.api.operations[req.operation];\n  util.each(operation.input.members, function (name, member) {\n    var value = req.params[name];\n    if (value === null || value === undefined) return;\n\n    if (member.location === 'headers' && member.type === 'map') {\n      util.each(value, function(key, memberValue) {\n        req.httpRequest.headers[member.name + key] = memberValue;\n      });\n    } else if (member.location === 'header') {\n      value = member.toWireFormat(value).toString();\n      if (member.isJsonValue) {\n        value = util.base64.encode(value);\n      }\n      req.httpRequest.headers[member.name] = value;\n    }\n  });\n}\n\nfunction buildRequest(req) {\n  populateMethod(req);\n  populateURI(req);\n  populateHeaders(req);\n  populateHostPrefix(req);\n}\n\nfunction extractError() {\n}\n\nfunction extractData(resp) {\n  var req = resp.request;\n  var data = {};\n  var r = resp.httpResponse;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  // normalize headers names to lower-cased keys for matching\n  var headers = {};\n  util.each(r.headers, function (k, v) {\n    headers[k.toLowerCase()] = v;\n  });\n\n  util.each(output.members, function(name, member) {\n    var header = (member.name || name).toLowerCase();\n    if (member.location === 'headers' && member.type === 'map') {\n      data[name] = {};\n      var location = member.isLocationName ? member.name : '';\n      var pattern = new RegExp('^' + location + '(.+)', 'i');\n      util.each(r.headers, function (k, v) {\n        var result = k.match(pattern);\n        if (result !== null) {\n          data[name][result[1]] = v;\n        }\n      });\n    } else if (member.location === 'header') {\n      if (headers[header] !== undefined) {\n        var value = member.isJsonValue ?\n          util.base64.decode(headers[header]) :\n          headers[header];\n        data[name] = member.toType(value);\n      }\n    } else if (member.location === 'statusCode') {\n      data[name] = parseInt(r.statusCode, 10);\n    }\n  });\n\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData,\n  generateURI: generateURI\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}