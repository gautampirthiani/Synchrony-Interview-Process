{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LRU_1 = require(\"./utils/LRU\");\nvar CACHE_SIZE = 1000;\n/**\n * Inspired node-lru-cache[https://github.com/isaacs/node-lru-cache]\n */\nvar EndpointCache = /** @class */function () {\n  function EndpointCache(maxSize) {\n    if (maxSize === void 0) {\n      maxSize = CACHE_SIZE;\n    }\n    this.maxSize = maxSize;\n    this.cache = new LRU_1.LRUCache(maxSize);\n  }\n  ;\n  Object.defineProperty(EndpointCache.prototype, \"size\", {\n    get: function () {\n      return this.cache.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  EndpointCache.prototype.put = function (key, value) {\n    var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n    var endpointRecord = this.populateValue(value);\n    this.cache.put(keyString, endpointRecord);\n  };\n  EndpointCache.prototype.get = function (key) {\n    var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n    var now = Date.now();\n    var records = this.cache.get(keyString);\n    if (records) {\n      for (var i = records.length - 1; i >= 0; i--) {\n        var record = records[i];\n        if (record.Expire < now) {\n          records.splice(i, 1);\n        }\n      }\n      if (records.length === 0) {\n        this.cache.remove(keyString);\n        return undefined;\n      }\n    }\n    return records;\n  };\n  EndpointCache.getKeyString = function (key) {\n    var identifiers = [];\n    var identifierNames = Object.keys(key).sort();\n    for (var i = 0; i < identifierNames.length; i++) {\n      var identifierName = identifierNames[i];\n      if (key[identifierName] === undefined) continue;\n      identifiers.push(key[identifierName]);\n    }\n    return identifiers.join(' ');\n  };\n  EndpointCache.prototype.populateValue = function (endpoints) {\n    var now = Date.now();\n    return endpoints.map(function (endpoint) {\n      return {\n        Address: endpoint.Address || '',\n        Expire: now + (endpoint.CachePeriodInMinutes || 1) * 60 * 1000\n      };\n    });\n  };\n  EndpointCache.prototype.empty = function () {\n    this.cache.empty();\n  };\n  EndpointCache.prototype.remove = function (key) {\n    var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n    this.cache.remove(keyString);\n  };\n  return EndpointCache;\n}();\nexports.EndpointCache = EndpointCache;","map":{"version":3,"names":["Object","defineProperty","exports","value","LRU_1","require","CACHE_SIZE","EndpointCache","maxSize","cache","LRUCache","prototype","get","length","enumerable","configurable","put","key","keyString","getKeyString","endpointRecord","populateValue","now","Date","records","i","record","Expire","splice","remove","undefined","identifiers","identifierNames","keys","sort","identifierName","push","join","endpoints","map","endpoint","Address","CachePeriodInMinutes","empty"],"sources":["/Users/damianmiskow/Desktop/Projects/Synchrony-Interview-Process/node_modules/aws-sdk/vendor/endpoint-cache/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRU_1 = require(\"./utils/LRU\");\nvar CACHE_SIZE = 1000;\n/**\n * Inspired node-lru-cache[https://github.com/isaacs/node-lru-cache]\n */\nvar EndpointCache = /** @class */ (function () {\n    function EndpointCache(maxSize) {\n        if (maxSize === void 0) { maxSize = CACHE_SIZE; }\n        this.maxSize = maxSize;\n        this.cache = new LRU_1.LRUCache(maxSize);\n    }\n    ;\n    Object.defineProperty(EndpointCache.prototype, \"size\", {\n        get: function () {\n            return this.cache.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EndpointCache.prototype.put = function (key, value) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var endpointRecord = this.populateValue(value);\n        this.cache.put(keyString, endpointRecord);\n    };\n    EndpointCache.prototype.get = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var now = Date.now();\n        var records = this.cache.get(keyString);\n        if (records) {\n            for (var i = records.length-1; i >= 0; i--) {\n                var record = records[i];\n                if (record.Expire < now) {\n                    records.splice(i, 1);\n                }\n            }\n            if (records.length === 0) {\n                this.cache.remove(keyString);\n                return undefined;\n            }\n        }\n        return records;\n    };\n    EndpointCache.getKeyString = function (key) {\n        var identifiers = [];\n        var identifierNames = Object.keys(key).sort();\n        for (var i = 0; i < identifierNames.length; i++) {\n            var identifierName = identifierNames[i];\n            if (key[identifierName] === undefined)\n                continue;\n            identifiers.push(key[identifierName]);\n        }\n        return identifiers.join(' ');\n    };\n    EndpointCache.prototype.populateValue = function (endpoints) {\n        var now = Date.now();\n        return endpoints.map(function (endpoint) { return ({\n            Address: endpoint.Address || '',\n            Expire: now + (endpoint.CachePeriodInMinutes || 1) * 60 * 1000\n        }); });\n    };\n    EndpointCache.prototype.empty = function () {\n        this.cache.empty();\n    };\n    EndpointCache.prototype.remove = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        this.cache.remove(keyString);\n    };\n    return EndpointCache;\n}());\nexports.EndpointCache = EndpointCache;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}